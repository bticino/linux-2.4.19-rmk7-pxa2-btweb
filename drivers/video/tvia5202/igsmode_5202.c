/*----------------------------------------------------------------------
            -----General Notice-----

  Copyright (C) 1997-2002, Tvia, Inc. (formerly IGS Technologies, Inc.)

  PERMISSION IS HEREBY GRANTED TO USE, COPY AND MODIFY THIS SOFTWARE
  ONLY FOR THE PURPOSE OF DEVELOPING IGS TECHNOLOGIES RELATED PRODUCTS.

  THIS SOFTWARE MAY NOT BE DISTRIBUTED TO ANY PARTY WHICH IS NOT COVERED
  BY IGS TECHNOLOGIES NON-DISCLOSURE AGREEMENT (NDA). UNAUTHORIZED DISCLOSURE
  IS AGAINST LAW AND STRICTLY PROHIBITED.

  THIS SOFTWARE IS PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND,
  EITHER EXPRESSED OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE IMPLIED
  WARRANTIES OF MERCHANTABILITY AND/OR FITNESS FOR A PARTICULAR PURPOSE.

            -----About This File----

                IGSMODE.H

  The file contains VGA and Extended registers settings.

            --Modification History--

  1. 03-26-1999 Rev 2.00
  2. 06-23-1999 SGRAM Table setting changes - cover more types of SGRAM.
        Changed tables - ExtSGRegData[].
  3. 02-15-2000 Add suport for SDRAM 1Mx16 - switch in igsmode.h: SDRAM

  ---------------------------------------------------------------------*/

#include "tvia.h"

static ModeInit Mode_800x600x16_60Hz;
static ModeInit Mode_640x480x16_60Hz;

ModeInit *TVIAModeReg_5202[TOTAL_MODES_5202] = {
    &Mode_800x600x16_60Hz,
    &Mode_640x480x16_60Hz
};

static StandardRegs S800x600x16x60 = {
	{
    0x00, 0x01, 0x0F, 0x00, 0x0E,
    0xEF,
    0x7F, 0x63, 0x63, 0x01, 0x69, 0x18, 0x72, 0xF0,
    0x00, 0x60, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x5a, 0x8e, 0x57, 0xC8, 0x00, 0x58, 0x72, 0xE3,
    0xFF,
    0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07,
    0x08, 0x09, 0x0A, 0x0B, 0x0C, 0x0D, 0x0E, 0x0F,
    0x01, 0x00, 0x0F, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x60, 0x05, 0x0F,
    0xFF
    }
};

static ExtendedRegs E800x600x16x60 = {
	{
    /*0x13,*/ 0xC8,
    0xB0, 0xC9,
    0xB1, 0x9E,
    0xBA, 0x00,
    0x11, 0x00,
    0x14, 0xC9,
    0x15, 0x00,
    0x56, 0x00,
    0x77, 0x02
	}
};

static StandardRegs S640x480x16x60 = {
	{
    0x00, 0x01, 0x0F, 0x00, 0x0E,
    0xEF,
    0x5F, 0x4F, 0x4F, 0x01, 0x53, 0x9C, 0x0B, 0x3E,
    0x00, 0x40, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0xE9, 0x04, 0xDF, 0xA0, 0x00, 0xE6, 0x0B, 0xC3,
    0xFF,
    0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07,
    0x08, 0x09, 0x0A, 0x0B, 0x0C, 0x0D, 0x0E, 0x0F,
    0x01, 0x00, 0x0F, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x60, 0x05, 0x0F,
    0xFF
	}
};

static ExtendedRegs E640x480x16x60 = {
	{
    /*0x13,*/ 0xA0,
    0xB0, 0xFB,
    0xB1, 0xC8,
    0xBA, 0x08,
    0x11, 0x00,
    0x14, 0xA1,
    0x15, 0x00,
    0x56, 0x00,
    0x77, 0x02
	}
};

static ModeInit Mode_800x600x16_60Hz = {
    &S800x600x16x60,
    &E800x600x16x60
};

static ModeInit Mode_640x480x16_60Hz = {
    &S640x480x16x60,
    &E640x480x16x60
};

/*------------------------------------------------------------
   This extended register table will initialize the chip into:
     1) 8 MB Video Memory.
     2) 85 Mhz Video Memory Clock.
     3) 640x480x16 @ 60Hz.
  ------------------------------------------------------------*/
u8 ExtRegData_5202[] = {
    /*   index   data   */
    0x10, 0x10,
    0x11, 0x00,
    0x12, 0x00,
    0x14, 0x51,
    0x15, 0x00,
    0x16, 0x00,
    /* reg_30 value will be auto-determined in DetectVideoMemory() */
    0x30, 0x03,                 /*0x3CE_30<1,0> = 0x3CE_72<1,0>, Memory size related */
    0x31, 0x00,
    0x32, 0x00,
    0x33, 0x05,     /*use Linear frame buffer*/
    0x3C, 0x40,
    0x3E, 0x00,
    0x3F, 0x00,
    0x50, 0x00,
    0x51, 0x00,
    0x52, 0x00,
    0x53, 0x00,
    0x54, 0x00,
    0x55, 0x00,
    0x56, 0x00,
    0x57, 0x01,                 /* 5300 11/22/99; Cyb5000 uses 0x01 */
    0x58, 0x00,
    0x59, 0x00,
    0x5A, 0x00,
    0x5C, 0xA0,
    0x5D, 0x00,
    0x5E, 0x00,
    0x5F, 0x00,
    /*0x70,   0x0B, *//*3ce_70 is set in code */
    0x71, 0x70,                 /*0x70 is for SD, 0xC0 for SG*/
    /* reg_72 value will be auto-determined in DetectVideoMemory() */
    0x72, 0x43,                 /* 8MB */
    0x73, 0x10,
    0x74, 0x1F,
    0x75, 0x10,
    0x76, 0x00,
    0x77, 0x02,                 /*16Bpp 565 */
    0x78, 0x00,
    0x79, 0x33,
    0x7A, 0xC8,
    0x90, 0x01,
    0x9C, 0x41,
    0x9E, 0x00,
    0xB0, 0xFB,                 /*SG Pixel Clock = 25.175 MHz */
    0xB1, 0xC8,
    0xB2, 0x52,                 /*Memory Clock = 85MHz ???*/
    0xB3, 0x4B,
    0xB5, 0x02,
    0xB6, 0xF0,
    0xB7, 0x0D,
    0xBF, 0x01,                 /*banking*/
    0xB8, 0x00,                 /*sys DLL off*/
    0xBF, 0x00,                 /*banking*/
    0xBA, 0x00,
    0xBB, 0x00,                 /*SG*/
    0xF6, 0x40,
    0xF8, 0x04,                 /*note: <6> - Screen is off */
    /*        0xF9,   0x07 *//*07: SG Latency 2;  0x0F: SG Latency 3 */
    0xF9, 0x0F,
    0xFA, 0x05
};

/*
  These extended register settings are only used for initializing the chip,
  and used once only when power-on.
  This is for SGRAM programming.
*/

u8 ExtSGRegData_5202[] =
{
    /*Externded register 3C4, for SGRAM*/
    /*index   data*/
    0x31, 0x0,    // for 1024x768x16x 60hz 082302
    0x32, 0x51,   // for 1024x768x16x 60hz 082302
    0x33, 0x11,   // for 1024x768x16x 60hz 082302
    0x34, 0x20,   //20: SG latency 2; 30: SG latency 3
    0x35, 0x00,
    0x37, 0x00,
    0x38, 0x90,    /* 5200 */
    0x39, 0x00,
    0x3A, 0x08,
    0x3B, 0x00,
    0x3C, 0xA1,    /* 5200 */
    0x3D, 0x3C,
    0x3E, 0x0E,
    0x3F, 0x55,
    0x30, 0x85,    /*reg_30 must programmed here*/
    0x36, 0x00
};